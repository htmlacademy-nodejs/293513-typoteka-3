extends layout
include mixins/date-time
include mixins/shrot-text
include mixins/pagination

block content
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p
      | –≠—Ç–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –±–ª–æ–≥–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, —á—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å —Å–µ–±—è üëè
    if !articles.length
      .main-page__empty-wrapper
        p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!
    else
      include partials/categories

      .main-page__section-flex
        section.main-page__hot.hot
          h2.hot__name
            | –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
            span.hot__icon.hot__icon--fire

          if !popular.length
            p.hot__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
          else
            ul.hot__list
              each article in popular
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${article.id}`)
                    +shortText(article.announce)
                    sup.hot__link-sup= article.commentsCount

        section.main-page__last.last
          h2.last__name
            | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            span.last__icon.last__icon--cloud

          if !comments.length
            p.last__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
          else
            ul.last__list
              each comment in comments
                li.last__list-item
                  img.last__list-image(
                    src=`img/${comment.users.avatar}`
                    width='20'
                    height='20'
                    alt= comment.users.name
                  )
                  b.last__list-name
                    | #{comment.users.name} #{comment.users.surname}
                  a.last__list-link(href=`/articles/${comment.articleId}`)
                    +shortText(comment.text)

      section.main-page__list.preview
        h2.visually-hidden –°–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π

        ul.preview__list
          each article in articles
            li(class=`preview__item ${!article.picture ? 'preview__item--noimage' : ''}`)
              ul.preview__breadcrumbs
                each category in article.categories
                  li.preview__breadcrumbs-item
                    a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`)
                      | #{category.name}

              if article.picture
                .preview__background
                  img.preview__background-image(
                    src=`/img/${article.picture}`
                    width='460'
                    height='240'
                    alt= article.title
                    style={['max-height']: '100%'}
                  )
              +dateTime(article.createdAt)(class='preview__time')

              h3.preview__name
                a.preview__name-link(href=`/articles/${article.id}`)= article.title
              p.preview__text= article.announce
              a.preview__comment(href=`/articles/${article.id}/comments`)
                | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                span.preview__cloud
                b.preview__comment-count= article.comments.length

      +pagination(page, totalPages, 2, `?`)
